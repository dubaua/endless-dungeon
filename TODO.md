Генератор состоит из lfo примерно на 0.22Hz, он служит источником мелодийного сигнала. сигнал с lfo копируется, и его копия инвертируется по фазе.

Также с некоторой вероятностью, 13% каждый тик 16 доли такта (или иногда мелодия идет в 8, неважно) возникает событие сброса фазы lfo (либо если lfo Tone.js умеет не сбрасывать, выставлять кастомную фазу, то нужно именно это, для музыкальности)

Далее эти 2 сигнала в противофазе заводятся в S&H, который триггерится другим событием (оно связано с тиком 16 или свинговым переходом в следующую долю, именно долю такта не целый такт).

Таким образом мы нашу "непрерывные" синусоиды превращаем в дискретный довольно сигнал. Этот сигнал мы пишем 4 такта в некоторое хранилище (на самом деле для каждого голоса, сейчас их 2, но может быть больше, свое хранилище), откуда потом мы его можем проиграть. Далее мы читаем сигнал из этого 4 тактного хранилища (для каждого голоса), (причем хранилище должно уметь выдавать сигнал параллельно с записью) и посылаем его в квантайзер.

Квантайзер имеет также вход оффсет, который сдвигает входящий сигнал на количество полутонов. Квантайзер у нас выдает уже ноты, которые затем будут консьюмить голоса.
